<?xml version="1.0" encoding="UTF-8"?>

<alvisnlp-plan id="tomap-classify">

  <!-- parameters -->
  <param name="xmlTermsFile">
    <alias module="yatea" param="xmlTermsFile"/>
  </param>

  <param name="yateaFile">
    <alias module="classify" param="yateaFile"/>
  </param>

  <!--
  ///////////////////////////////////////////////////////////////////////////////////////
  //
  // I. Load test corpus to yatea
  //
  ///////////////////////////////////////////////////////////////////////////////////////
  -->


  <yatea class="YateaExtractor">
    <xmlTermsFile>output/yatea.xml</xmlTermsFile>
    <language>FR</language>
    <yateaExecutable>/Users/belka/Documents/work/inrae/outils/alvisnlp/YaTeA/local/bin/yatea</yateaExecutable>
    <perlLib>/Users/belka/Documents/work/inrae/outils/alvisnlp/YaTeA/lib/perl5/site_perl</perlLib>
    <rcFile>/Users/belka/Documents/work/inrae/outils/alvisnlp/YaTeA/etc/yatea/yatea.rc</rcFile>
    <configDir>/Users/belka/Documents/work/inrae/outils/alvisnlp/YaTeA/usr/share/YaTeA/config</configDir>
    <localeDir>/Users/belka/Documents/work/inrae/outils/alvisnlp/YaTeA/usr/share/YaTeA/locale</localeDir>
  </yatea>

  <!--
  ///////////////////////////////////////////////////////////////////////////////////////
  //
  // II. Search for terms and associate a category identifier
  //
  ///////////////////////////////////////////////////////////////////////////////////////
  -->

  <classify class="TomapProjector">
    <subject layer="words" feature="lemma"/>
    <yateaFile output-feed="true">output/yatea.xml</yateaFile>
    <tomapClassifier graylist="resources/tomap/tomap-graylist.txt" >resources/tomap/frenchCropUsage_20210525.tomap</tomapClassifier>
    <targetLayerName>fcu-tomap</targetLayerName>
    <conceptFeature>IRI</conceptFeature>
    <explanationFeaturePrefix>tomap-</explanationFeaturePrefix>
    <scoreFeature>similarity</scoreFeature>
    <lemmaKeys/>
  </classify>


  <!--
  ///////////////////////////////////////////////////////////////////////////////////////
  //
  // III. Add skos preflabels to fcu-tomap
  //
  ///////////////////////////////////////////////////////////////////////////////////////
  -->

  <label class="FileMapper">
    <mappingFile>resources/tomap/frenchCropUsage_20210525.txt</mappingFile>
    <target>documents.sections.layer:fcu-tomap</target>
    <form>@IRI</form>
    <targetFeatures>,,skos-prefLabel</targetFeatures>
    <keyColumn>1</keyColumn>
  </label>


</alvisnlp-plan>
